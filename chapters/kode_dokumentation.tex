\chapter{Dokumentation af kode} \label{chap:kode_docs}
I dette kapitel vil funktioner i programmet blive forklaret.

\section{Loginsystem} \label{sec:login}
Formålet med et loginsystem er, at programmet kan holde styr på hvilken bruger der anvender systemet. 
Dette er vigtigt således reservationer placeres i det rigtige navn, og at brugeren kun har adgang til de rigtige funktioner. 
Eksempelvis skal et medlem af sejlklubben, ikke have adgang til at tilføje og fjerne brugere. 

Loginproceduren består fra brugeres synspunkt af at indtaste sit brugernavn og adgangskode, og trykke på login eller enter. 
Hvis brugeren har tastet rigtigt, vises deres en velkomstbesked og, afhængigt af brugerens privileger, får vedkommende adgang til de funktioner de har til rådighed.

Når loginet udføres af brugeren, oprettes der en forbindelse til databasen, hvorefter den tjekker hvorvidt de informationer, som er givet, stemmer overens med dens. 
Dog anvendes der en kryptografisk hashing algoritme. Dette er for at undgå, at folk med adgang til databasen kan aflæse brugernes adgangskoder.
Det er en præventiv beskyttelse mod hacking angreb.


\begin{wrapfigure}{l}{0.5\textwidth}
    \label{img:login_interface}
    \vspace{-20pt}
    \begin{center}
        \includegraphics[width=0.48\textwidth]{UI/Login_Window_Empty_Fields.png}
    \end{center}
    \vspace{-15pt}
    \caption{Login interface}
    \vspace{10pt}
\end{wrapfigure}

I programmet anvendes SHA-256, som returner en 256 bit hash (dvs. 32 bytes og 64 karakterer som en streng). 
Men dette ville være trivielt, at udskifte med en anden hashing algoritme, hvis der blev fundet en svaghed i SHA-256. 

Login interfacet (Figur \ref{img:login_interface}) giver også mulighed for at logge ind anonymt, som en gæst. 
Dette udføres ved at trykke på ``Login som gæst''-knappen. 
Login knappen (samt at trykke på ``Enter''/``Return''-knappen mens tekstfelterne er i fokus), udfører et login.
Samt giver brugeren adgang til et passende interface i hendhold til tabel \ref{tab:permissions}.


% LaTeX tabel som viser alle brugerniveauer og deres muligheder efter login.
% http://bit.ly/1kToHZ3 to edit raw table
\begin{table}
    \colorlet{shadecolor}{gray!40}
    \rowcolors{1}{white}{shadecolor}
    \begin{tabular}{l|llllll}
    ~                        & Gæst & Supportmedlem & Medlem & Elev & Underviser & Administrator \\ \hline
    Personlig forside        & ~    & ~             & \ding{51}     & \ding{51}    & \ding{51}          & \ding{51}             \\
    Se begivenheder          & \ding{51}    & \ding{51}             & \ding{51}      & \ding{51}    & \ding{51}          & \ding{51}             \\
    Tilmeld begivenheder     & ~    & \ding{51}             & \ding{51}      & \ding{51}    & \ding{51}          & \ding{51}             \\
    Opret begivenheder       & ~    & ~             & ~      & ~    & \ding{51}          & \ding{51}             \\
    Se sejlture              & \ding{51}    & \ding{51}             & \ding{51}      & \ding{51}    & \ding{51}          & \ding{51}             \\
    Opret sejltur            & ~    & ~             & \ding{51}      & \ding{51}    & \ding{51}          & \ding{51}             \\
    Se logbøger              & \ding{51}    & \ding{51}             & \ding{51}      & \ding{51}    & \ding{51}          & \ding{51}             \\
    Opret logbog             & ~    & ~             & \ding{51}      & \ding{51}    & \ding{51}          & \ding{51}             \\
    Svar på logbog           & ~    & ~             & ~      & ~    & ~          & \ding{51}             \\
    Se undervisningstimer    & ~    & ~             & ~      & \ding{51}    & \ding{51}          & \ding{51}             \\
    Opret undervisningstimer & ~    & ~             & ~      & ~    & \ding{51}          & \ding{51}             \\
    \end{tabular}
    \caption{Tabel over alle brugerniveauer og deres tilladte funktioner.}\label{tab:permissions}\fixme{Måske skal denne tabel lige laves lidt om, enten indholdet, eller hvordan det virker i programmet.}

\end{table}

\section{Primære brugergrænseflade}
Det primære vindue tilgåes via login vinduet, som er det der starter ved programstart, eller logud. 
Der findes 4 vinduer, forskellen mellem dem er hvilke tabs der er aktive. 
I hver tab findes der en funktionalitet, samlet set findes følgende tabs:
\begin{itemize}% Denne skulle måske relatere til tabel tab:permission
    \item Forside
    \item Undervisning
    \item Begivenheder
    \item Medlemmer
    \item Både
\end{itemize}

Via hver af disse tabs, vil der være adgang til programmet forskellige funktionaliteter.
Der er også en log ud knap, som bruges til at vende tilbage til loginvinduet, således en anden bruger kan anvende systemet.
Programmet er lavet til at køre i opløsningen 1024x720 pixels.
Denne opløsning er valgt for at understøtte alt fra bærbare, med opløsninger som 1366x768 pixels i et vindue, og op til FullHD (1920x1080 pixels) osv.
Programmet har et lyst farveskema, men farverne hvid og en lys blå som hovedfarver (\#87D4EE).

\section{Klasser}
\subsection*{Medlemsklasse}
%Set imagepath and scaling, imagepath set to start in images/UmlMini folder, just write filename and extension
%FBox added for outline on items
\begin{wrapfigure}{l}{0.5\textwidth}
    \label{img:login_interface}
    \vspace{-20pt}
    \begin{center}
        \includegraphics[width=0.48\textwidth]{UmlMini/SailClubMember.png}
    \end{center}
    \vspace{-20pt}
    \caption{SailClubMember}
    \vspace{-10pt}
\end{wrapfigure}
Basis medlemsklassen for systemet er SailClubMember. 
Klassen er en underklasse til den mere generelle Person klasse. 
Udbyggelsen i denne klasse er, at et medlem har et medlems Id, en position, et brugernavn og et password. 
Id'et bliver brugt i hele systemet til at identificere hvilken bruger der gør hvad. 

Positions feltet angiver at personen er et medlem i klubben. 
Positions feltet kan også sættes til at være administrator, i tilfælde at at personen er administrator. 
Positions feltet angiver desuden hvilke rettigheder de forskellige brugere har, fx har en administrator lov til at tilgå alle funktioner i programmet, mens et medlem ikke har lov til at gå ind i undervisnings delen af programmet. 

Brugernavn og password felterne anvendes i login systemet, som sikrer at hver bruger kan logge ind på systemet og sikre at de kan tilgå funktionerne.

SailClubMember klassen er central i programmet, da alle brugere/medlemmer af sejklubben skal oprettes som et SailClubMember og deri skal deres position i klubben angives, så de kan tilgå de funktioner i programmet som de kunne have gavn af. Derudover findes der i RegularSailTrip-klassen og Logbook-klassen referencer til SailClubMember. Dette gøres så at information om hvem der har foretaget en booking af en båd, og hvem der har skrevet logbogen til den sejltur der blev foretaget. Disse referencer er også vist på det fulde UML-diagram som findes i \myref{UML_diagram}
 
\subsection{Eventklasse}

\begin{wrapfigure}{l}{0.5\textwidth}
    \label{img:login_interface}
    \vspace{-20pt}
    \begin{center}
        \includegraphics[width=0.48\textwidth]{UmlMini/Event.png}
    \end{center}
    \vspace{-20pt}
    \caption{Eventklasse}
    \vspace{-10pt}
\end{wrapfigure}
Eventklassen er den klasse om bruges til oprettelse af  begivenheder. Klassen består af 7 felter: EventDate, EventTitle, SignUpReq, Description, SignUpMsg, Created og så en liste af klassen Person, som hedder Participants.

Description er selve begivenhedsbeskrivelsen. 

Participantslisten bruges når folk skal tilmeldes til begivenhederne; hver begivenhed har sig egen liste med tilmeldte. 

Den eneste metode er en override af ToString, som retunerer Description.

