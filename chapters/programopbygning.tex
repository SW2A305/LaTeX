\chapter{Programopbygning}

I dette kapitel vil programmets opbygning blive beskrevet. Først vil programmets arkitektur blive beskrevet, derefter navigeringen i programmets brugergrænseflade.

\input{images/flowcharts/programopbygning.tex}
På ovenstående flowchart, \myref{img:programOpbygning}, ses den overordnede struktur af programmet.
I bunden ses modelboksen, som repræsenterer modellaget.
Her findes de modeller vi anvender i programmet.
Modellerne er forbundet til vores Dal, Data Abstraction Layer, hvilket er den generiske kontakt fra programmet ud mod databasen.
Fra den generiske IDal findes der forbindelser ud til et SQLite Dal og et Entity Framwork Dal, som hver i sær har forbindelse til de databaser de hører til.
Ideen ved det generiske IDal er at der let kan skiftes mellem forskellige databaser, dette vil der kommes nærmere ind på i \myref{chap:database}.
Over IDal og Model findes code-behind og UI'en.
Code-behind og UI er forbundet da UI-filerne kun indeholder grafiske elementer og code-behind filerne indeholder det kode som UI'en har brug for.
Code-behind filerne er også i direkte kontakt med IDal for at kunne tilgå data i databasen.
Yderligere har code-behind også kendskab til modellaget, illustreret med en stiplet linje.
Code-behind har behov for kendskab til modellerne, da der flere steder i koden har været brug for at instantiere modellerne for at håndetere data. 
%\section{Klasser}

%For at holde styr på medlemmer i sejlklubben, er der lavet en overordnet person klasse. Klassens ``PersonId'' er et
%nummer som kan bruges til at skelne de enkelte personer fra hinanden. ``BoatDriver'' er en boolsk værdi som afgør om
%personen har et førerbevis eller ej. ``SailClubMember'' klassen arver fra person klassen og har et ``MemberId'', et
%``Username'' og ``PasswordHash''. De to sidstnævnte skal bruges til logge på i programmet. Klassen har også et
%``Position'' medlem. Denne afgør hvilke slags medlem man er. Medlemstyper er som følger:

%\begin{itemize}
%\item SupportMember
%\item Student
%\item Member
%\item Teacher
%\item Admin
%\end{itemize}

%Programmet indeholder også en båd klasse. Dataene indeholdt i denne klasser giver sig selv ud fra UML-diagrammet. Der er
%også en overordnet klasse for sejlture, som er abstrakt. Denne arver klasserne skoletur og almindelig tur fra. Der skal
%for hver sejltur, registreres hvilken båd der bliver brugt samt tidspunkt for afgang og ankomst. Vejrforholdene skal
%registres og der kan tilføjes de kommentarer der muligvis kan være. Når der er tale om en almindelig tur, registreres
%der hvem kaptajnen er og de øvrige besætningsmedlemmer bliver tilføjet til en liste. Der skal desuden registreres,
%hvornår man regner med at være tilbage fra turen, hvad formålet med turen er og hvor man sejler henne. Dette skal
%gøres, så det er lettere at finde båden og besætningen, f.eks. i tilfælde af at en ulykke forekommer.
%Ved en skoletur er der registret et skolehold, som er defineret i en klasse. Skoleholds klassen indeholder lærer og
%elever. Man kan tilføje yderligere elever til en skoletur, som normalt ikke er med, samt gæster som ikke er elever. Der
%registreres også hvem der deltager på turen, da der kan være elever fra det normale hold, som ikke møder op. Til
%sejlturene er der tilknyttet en skadesrapport, som skal, som navnet angiver, bruges til at registrere hvis der kommer
%skader på båden under sejladsen. 


%\section{Medlemsdata}

%``PersonId'' og ``MemberId'' bliver, som nævnt, brugt til at skelne de forskellige personer og medlemmer fra hinanden,
%ligesom ``FirstName'' og ``LastName'' bliver brugt til identificering. Adresse dataene er almindelige for en klub at
%have på sine medlemmer, men bliver ikke brugt til noget i programmet. Ligeledes bliver ``DateOfBirth'', ``Gender'',
%``PhoneNumber'' og ``Email'' ikke brugt. ``BoatDriver'' fortæller, som sagt, hvorvidt medlemmet har førerbevis, og
%bestemmer i programmet om medlemmet har lov til at være ``Captain'' på en sejltur. ``Position'' afgør hvad
%medlemmet har adgang til i programmet, f.eks. har et medlem der er ``Student'' adgang til undervisningsfunktionerne i
%programmet, hvorimod et almindeligt ``Member'' ikke har. ``Username'' og ``PasswordHash'' bruges, som sagt, til at logge
%på.\fxfatal{Ændre tekst til generel programopbygning}
